(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{199:function(e,a,t){},429:function(e,a,t){"use strict";t.r(a);var n=t(19),r=t(7),s=t(9),o=t(0),i=t.n(o),c=(t(199),t(16)),m=t.n(c),u=t(10),l=t(113),p=function(e){var a=e.onChange,t=e.onSubmit,n=e.confirm,r=Object(l.f)().push;return i.a.createElement(i.a.Fragment,null,i.a.createElement("form",{onSubmit:t,className:"logInForm"},i.a.createElement("h3",null,n||"LOG IN"),i.a.createElement("input",{onChange:a,name:"email",placeholder:"email or username",type:"email",minLength:"2",required:!0}),i.a.createElement("input",{onChange:a,name:"password",placeholder:"password",type:"password",minLength:"6",required:!0}),i.a.createElement("div",{onClick:function(){return r("resetpassword")},className:"resetPassword pointer"},"reset password"),i.a.createElement("input",{className:"submitButton",type:"submit"})),i.a.createElement("div",{className:"logSignSwitch",onClick:function(){return r("signup")}},"NO ACCOUNT? ",i.a.createElement("strong",{className:"customLink"},"SIGN UP")))},d=function(e){var a=e.onChange,t=e.onSubmit,n=(e.logIn,Object(l.f)().push);return i.a.createElement(i.a.Fragment,null,i.a.createElement("form",{onSubmit:t,className:"logInForm"},i.a.createElement("h3",null,"SIGN UP"),i.a.createElement("input",{onChange:a,name:"userName",placeholder:"username",type:"text",minLength:"2",required:!0}),i.a.createElement("input",{onChange:a,name:"email",placeholder:"email",type:"email",minLength:"2",required:!0}),i.a.createElement("input",{onChange:a,name:"password",placeholder:"password",type:"password",minLength:"6",required:!0}),i.a.createElement("input",{onChange:a,name:"passwordRe",placeholder:"repeat password",type:"password",minLength:"6",required:!0}),i.a.createElement("input",{className:"submitButton",type:"submit"})),i.a.createElement("div",{className:"logSignSwitch",onClick:function(){return n("login")}},"ALREADY HAVE AN ACCOUNT? ",i.a.createElement("strong",{className:"customLink"},"LOG IN!")))},g=function(e){var a=e.sendAgain,t=e.confirm;return i.a.createElement("div",{className:"logSignContainer confirmMail gradientBackground"},i.a.createElement("h3",null,t.message),i.a.createElement("div",{className:"sendAgain"},"nothing received?",t.sent?i.a.createElement("div",{id:"sendAgainButton",className:"submitButton"},t.sent):i.a.createElement("div",{onClick:a,id:"sendAgainButton",className:"submitButton"},"SEND AGAIN")))},f=function(e){var a=e.onChange,t=e.onSubmit,n=e.confirm;return i.a.createElement("form",{onSubmit:t,className:"logInForm"},i.a.createElement("h3",null,n||"SEND RESET LINK TO"),i.a.createElement("input",{onChange:a,name:"email",placeholder:"email or username",type:"email",minLength:"2",required:!0}),i.a.createElement("input",{className:"submitButton",type:"submit",value:"SEND"}))},h=function(e){var a=e.onSubmit,t=e.onChange,n=Object(l.h)().params;return i.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a(n.key,n.email)},className:"logInForm"},i.a.createElement("h3",null,"CREATE NEW PASSWORD"),i.a.createElement("input",{onChange:t,name:"password",placeholder:"password",type:"password",minLength:"6",required:!0}),i.a.createElement("input",{onChange:t,name:"passwordRe",placeholder:"repeat password",type:"password",minLength:"6",required:!0}),i.a.createElement("input",{className:"submitButton",type:"submit"}))};a.default=Object(o.memo)(function(e){var a=e.close,t=Object(l.f)().push,c=Object(o.useState)({userName:"",password:"",passwordRe:"",email:""}),E=Object(s.a)(c,2),w=E[0],b=E[1],N=Object(o.useState)(!1),S=Object(s.a)(N,2),v=S[0],C=S[1],O=Object(o.useState)({message:""}),A=Object(s.a)(O,2),y=A[0],j=A[1],k=Object(u.b)(),L=Object(s.a)(k,2)[1],D=Object(o.useState)(""),T=Object(s.a)(D,2),I=T[0],F=T[1];Object(o.useEffect)(function(){return L({type:"blockScroll"}),function(){L({type:"unblockScroll"})}},[]);var P=function(e){var a=Object(r.a)({},w,Object(n.a)({},e.target.name,e.target.value));b(a)},B=function(e){if(e.preventDefault(),w.password===w.passwordRe){var a=new FormData;a.set("userName",w.userName),a.set("email",w.email),a.set("password",w.password),m.a.post("".concat("/api","/signup"),a).then(function(e){if(!e.data||!e.data.message||!e.data.sendAgainPath)throw new Error("server failed to confirm your mail");C(e.data.sendAgainPath),j({message:e.data.message})}).catch(function(e){F("something went wrong"),setTimeout(function(){return F("")},4e3)})}else F("please check your password"),setTimeout(function(){return F("")},4e3)},R=function(e){if(e.preventDefault(),w.email.length>2&&w.password.length>5){var t=new FormData;t.set("email",w.email),t.set("password",w.password),m.a.post("".concat("/api","/login"),t,{withCredentials:!0}).then(function(e){e.data.user&&(L({type:"logIn",payload:e.data.user}),a())}).catch(function(e){if(e.response&&403===e.response.status){if(!e.res.data||!e.res.data.message||!e.res.data.sendAgainPath)return alert("server failed to confirm your mail");C(e.res.data.sendAgainPath),j({message:e.res.data.message})}else F("wrong email or password"),setTimeout(function(){return F("")},4e3)})}},q=function(e){e.preventDefault();var a=new FormData;a.set("email",w.email),m.a.post("".concat("/api","/resetpassword"),a,{withCredentials:!0}).then(function(e){j({message:"succesfully sent"}),setTimeout(function(){return j({message:""})},1e4)}).catch(function(e){F("email not found"),setTimeout(function(){return F("")},4e3)})},U=function(e,a){if(e&&a&&w.password&&w.password===w.passwordRe){var n=new FormData;n.set("password",w.password),n.set("key",e),n.set("email",a),m.a.post("".concat("/api","/createnewpassword"),n).then(function(e){j({message:"SUCCESFULLY CREATED"}),setTimeout(function(){return j({message:""})},5e3),t("login")}).catch(function(e){F("failed"),setTimeout(function(){return F("")},4e3)})}};return v?i.a.createElement(g,{sendAgain:function(e){if(e.preventDefault(),!v||!y)return alert("looks like the server fucked up! :(");m.a.get("".concat("/api","/confirmagain/").concat(v)).then(function(e){j(Object(r.a)({},y,{sent:"WAS SENT"})),setTimeout(function(){var e=y.message,a=y.sendAgainPath;j({message:e,sendAgainPath:a})},3e3)}).catch(function(e){j(Object(r.a)({},y,{sent:"FAILED"})),setTimeout(function(){var e=y.message,a=y.sendAgainPath;j({message:e,sendAgainPath:a})},3e3)})},confirm:y}):i.a.createElement("div",{className:"logSignContainer gradientBackground ".concat(I?"animationShake":"")},I&&i.a.createElement("p",{className:"errorMessage"},I),i.a.createElement(l.c,null,i.a.createElement(l.a,{path:"*/login",render:function(){return i.a.createElement(p,{onSubmit:R,onChange:P,confirm:y.message})}}),i.a.createElement(l.a,{path:"*/signup",render:function(){return i.a.createElement(d,{onSubmit:B,onChange:P})}}),i.a.createElement(l.a,{path:"*/resetpassword",render:function(){return i.a.createElement(f,{onSubmit:q,onChange:P,confirm:y.message})}}),i.a.createElement(l.a,{path:"*/createnewpassword/:key/:email",render:function(){return i.a.createElement(h,{onChange:P,onSubmit:U})}})))})}}]);
//# sourceMappingURL=5.19f19083.chunk.js.map